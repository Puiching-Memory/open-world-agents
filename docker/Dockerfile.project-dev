# OWA Project Dev Image - Complete Development Environment
ARG BASE_DEV_IMAGE=owa/base:dev
FROM ${BASE_DEV_IMAGE}

# Project setup
ARG PROJECT_DIR=/workspace
WORKDIR ${PROJECT_DIR}

# Switch to user and setup project
ARG USERNAME=vscode
COPY --chown=${USERNAME}:${USERNAME} ./setup_project.sh /tmp/setup_project.sh

ARG CONDA_INSTALL_PATH=/opt/conda
RUN chmod +x /tmp/setup_project.sh && \
    /tmp/setup_project.sh ${PROJECT_DIR} && \
    rm /tmp/setup_project.sh

# Default configuration
SHELL ["/bin/zsh", "-c"]
CMD ["/bin/zsh"]
